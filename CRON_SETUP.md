# ๐ ุฅุนุฏุงุฏ ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ ุงูููููุฉ (Cron Job)

## ุงููุฏู:
ุชุดุบูู ูุญุต ุงูููุชุฌุงุช ุชููุงุฆูุงู ูู ููู ูู ููุช ูุญุฏุฏ (ูุซูุงู: 9 ุตุจุงุญุงู).

---

## โ ุงูุฎูุงุฑ ุงูุฃูุถู: ุงุณุชุฎุฏุงู Cron-Job.org (ูุฌุงูู 100%)

### ุงูุฎุทูุฉ 1: ุงูุชุณุฌูู

1. ุงุฐูุจ ุฅูู: **https://console.cron-job.org/signup**
2. ุณุฌูู ุญุณุงุจ ูุฌุงูู (ูุฏุนู ุญุชู 50 cron job!)

---

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก Cron Job ุฌุฏูุฏ

1. ุจุนุฏ ุชุณุฌูู ุงูุฏุฎููุ ุงุถุบุท **"Create cronjob"**
2. ุงููุฃ ุงูุจูุงูุงุช ูุงูุชุงูู:

**Title (ุงูุนููุงู):**
```
Mouna - Expiry Check
```

**URL:**
```
https://YOUR_SERVER_URL/api/check-expiry
```
**โ๏ธ ููู:** ุงุณุชุจุฏู `YOUR_SERVER_URL` ุจุฑุงุจุท ุฎุงุฏูู ุงููุนูู:
- ุฅุฐุง ูุงู ุนูู Render: `https://mouna-api.onrender.com`
- ุฅุฐุง ูุงู ุนูู Railway: `https://mouna-api.up.railway.app`
- ุฅุฐุง ูุงู ูุญูู: ูู ูุนูู (ูุฌุจ ุฃู ูููู ุงูุฎุงุฏู ุนูู ุงูุฅูุชุฑูุช)

**Schedule (ุงูุฌุฏููุฉ):**
- ุงุฎุชุฑ **"Every day"**
- ุงูููุช: **9:00 AM** (ุฃู ุฃู ููุช ุชูุถูู)
- ุงูููุทูุฉ ุงูุฒูููุฉ: **Asia/Riyadh** (ุฃู ุจูุฏู)

**Request Method:**
- ุงุฎุชุฑ **GET**

**Notifications (ุงุฎุชูุงุฑู):**
- ูุนูู "Send me an email if the execution fails"

---

### ุงูุฎุทูุฉ 3: ุญูุธ ูุชูุนูู

ุงุถุบุท **"Create"** ุซู ุชุฃูุฏ ุฃู Status = **Enabled** (โ)

---

## ๐งช ุงุฎุชุจุงุฑ Cron Job

ุจุนุฏ ุงูุฅูุดุงุก:
1. ุงุถุบุท ุนูู Cron Job ุงูุฐู ุฃูุดุฃุชู
2. ุงุถุบุท **"Run Now"** ูุงุฎุชุจุงุฑ ููุฑู
3. ุชุญูู ูู **Execution History** ููุชุฃูุฏ ุฃู ุงููุชูุฌุฉ 200 OK

---

## ๐ฑ ุงููุชูุฌุฉ:

ูู ููู ุงูุณุงุนุฉ 9 ุตุจุงุญุงู:
- ุณูุชู ูุญุต ุฌููุน ุงูููุชุฌุงุช
- ุฅุฐุง ูุงู ููุงู ููุชุฌุงุช ุณุชูุชูู ุฎูุงู 7 ุฃูุงู
- ุณููุฑุณู ุฅุดุนุงุฑ ูุฌููุน ุงูุฃุฌูุฒุฉ ุงููุดุชุฑูุฉ

ูุซุงู:
```
๐ ุชูุจูู ุงูุชูุงุก ุงูุตูุงุญูุฉ
โ๏ธ ุชูุจูู: ูุฏููู 8 ููุชุฌุงุช ุณุชูุชูู ุตูุงุญูุชูุง ุฎูุงู 7 ุฃูุงู! ุชููุฏ ุงููุฎุฒูู ุงูุขู.
```

---

## ๐ ุฎูุงุฑุงุช ุจุฏููุฉ:

### **ุฅุฐุง ููุช ุชุณุชุฎุฏู Render:**
1. ุงุฐูุจ ุฅูู Dashboard โ Your Service
2. ุงุฎุชุฑ **Cron Jobs** (ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ)
3. ุฃุถู:
   - **Name**: expiry-check
   - **Command**: `curl https://YOUR_APP_URL/api/check-expiry`
   - **Schedule**: `0 9 * * *` (ูู ููู 9 ุตุจุงุญุงู)

### **ุฅุฐุง ููุช ุชุณุชุฎุฏู Railway:**
ููุฃุณู Railway ูุง ูุฏุนู Cron Jobs ุงููุฌุงููุฉุ ุงุณุชุฎุฏู Cron-Job.org

---

## โ๏ธ ุชุฎุตูุต ุงูุฌุฏููุฉ:

### ุฃูุซูุฉ ุนูู Cron Expressions:

| ุงููุตู | ุงูุชุนุจูุฑ |
|-------|---------|
| ูู ููู 9 ุตุจุงุญุงู | `0 9 * * *` |
| ูู ููู 6 ูุณุงุกู | `0 18 * * *` |
| ูู 12 ุณุงุนุฉ | `0 */12 * * *` |
| ูู ุฃุญุฏ 10 ุตุจุงุญุงู | `0 10 * * 0` |
| ูุฑุชูู ููููุงู (9 ุตุจุงุญุงู ู6 ูุณุงุกู) | `0 9,18 * * *` |

---

## โ ุชุฃููุฏ ุงูุชุดุบูู:

ุจุนุฏ ุถุจุท Cron Jobุ ุงูุชุญ OneSignal Dashboard:
- ุงุฐูุจ ุฅูู **Messages** โ **Sent Messages**
- ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ ุฌุฏูุฏุฉ ูู ููู ุฅุฐุง ูุงู ููุงู ููุชุฌุงุช ูุฑูุจุฉ ูู ุงูุงูุชูุงุก

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### **ุงููุดููุฉ: Cron Job ุชูุดู (Error 500)**
- ุชุฃูุฏ ุฃู `ONESIGNAL_REST_API_KEY` ููุฌูุฏ ูู Environment Variables ุนูู ุงูุฎุงุฏู
- ุชุฃูุฏ ุฃู ุงูุฎุงุฏู ูุนูู

### **ุงููุดููุฉ: ูุง ุชุตู ุงูุฅุดุนุงุฑุงุช**
- ุชุฃูุฏ ุฃู ุงูุฃุฌูุฒุฉ ูุดุชุฑูุฉ (ุงูุชุญ OneSignal Dashboard โ Audience)
- ุงุฎุชุจุฑ `/api/check-expiry` ูุฏููุงู ูู ุงููุชุตูุญ

---

**ุจุงูุชูููู! ๐**
