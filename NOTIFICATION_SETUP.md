# ๐ ุฏููู ุฅุนุฏุงุฏ ูุธุงู ุงูุชูุจููุงุช ุงูุชููุงุฆูุฉ ููููุชุฌุงุช

## ุงููุฏู:
ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ ููููุงู ููููุชุฌุงุช ุงูุชู ุณุชูุชูู ุตูุงุญูุชูุง ุฎูุงู 7 ุฃูุงู.

---

## โ ูุง ุชู ุชุฌููุฒู ูุณุจูุงู:

1. โ **API Endpoint ุฌุงูุฒ**: `/api/check-expiry`
2. โ **OneSignal ููุนูู ููุฑุจูุท**
3. โ **Firebase ููุนุฏูู ุจุดูู ุตุญูุญ**
4. โ **ุงูุฃุฌูุฒุฉ ูุดุชุฑูุฉ ุจุงูุฅุดุนุงุฑุงุช**

---

## ๐ ุงูุฎุทูุงุช ุงููุชุจููุฉ:

### ุงูุฎุทูุฉ 1๏ธโฃ: ุงูุญุตูู ุนูู OneSignal REST API Key

1. ุงุฐูุจ ุฅูู [OneSignal Dashboard](https://dashboard.onesignal.com)
2. ุงุฎุชุฑ ูุดุฑูุนู **Mouna**
3. ุงุฐูุจ ุฅูู **Settings** -> **Keys & IDs**
4. ุงูุณุฎ **REST API Key** (ุณูุจุฏุฃ ุจู `NDU...` ุฃู `ZTY...`)

> **ููู:** ูุง ุชุดุงุฑู ูุฐุง ุงูููุชุงุญ ูุน ุฃุญุฏ! ุงุญูุธู ูู ููุงู ุขูู.

---

### ุงูุฎุทูุฉ 2๏ธโฃ: ุฅุถุงูุฉ ุงูููุชุงุญ ูููู `.env`

**ูู ุฌูุงุฒู ุงููุญูู (Local Development):**

1. ุงูุชุญ ููู `.env` ูู ูุฌูุฏ ุงููุดุฑูุน (ุฅุฐุง ูู ููู ููุฌูุฏุงูุ ุฃูุดุฆู)
2. ุฃุถู ูุฐุง ุงูุณุทุฑ:
   ```env
   ONESIGNAL_REST_API_KEY=ุถุน_ุงูููุชุงุญ_ููุง
   ```
3. ุงุญูุธ ุงูููู

**ูุซุงู:**
```env
DATABASE_URL="postgresql://..."
ONESIGNAL_REST_API_KEY="NDU4MGI3YWEtZmE5Yi00YmIwLTk5OGUtNGRjYjQ3ZGFmYjgy"
```

---

### ุงูุฎุทูุฉ 3๏ธโฃ: ุงุฎุชุจุงุฑ ุงููุธุงู ูุฏููุงู

ุจุนุฏ ุฅุถุงูุฉ ุงูููุชุงุญุ ุดุบูู ุงูุฎุงุฏู ูุงูุชุญ ุงููุชุตูุญ:

```
http://localhost:3000/api/check-expiry
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุฅุฐุง ูุงู ููุงู ููุชุฌุงุช ุณุชูุชูู ุฎูุงู 7 ุฃูุงู:
  ```json
  {
    "success": true,
    "productsFound": 5,
    "notificationSent": true,
    "oneSignalId": "abc123..."
  }
  ```
- ุฅุฐุง ูู ุชูู ููุงู ููุชุฌุงุช:
  ```json
  {
    "message": "No expiring products found."
  }
  ```

---

### ุงูุฎุทูุฉ 4๏ธโฃ: ุฌุฏููุฉ ุชูููุฐ ุชููุงุฆู ูููู (Cron Job)

#### **ุงูุฎูุงุฑ A: ุงุณุชุฎุฏุงู ุฎุฏูุฉ ูุฌุงููุฉ (ููุตู ุจู)**

ุงุณุชุฎุฏู **[cron-job.org](https://cron-job.org)** (ูุฌุงููุฉ 100%):

1. ุณุฌูู ุญุณุงุจ ูุฌุงูู
2. ุงุถุบุท **Create Cronjob**
3. ุงููุฃ ุงูุจูุงูุงุช:
   - **Title**: Expiry Checker - Mouna
   - **URL**: `https://YOUR_SERVER_URL/api/check-expiry`
   - **Schedule**: Every day at 9:00 AM (ุฃู ุงูููุช ุงูุฐู ุชุฑูุฏู)
4. ุงุญูุธ

#### **ุงูุฎูุงุฑ B: ูู ุงูุฎุงุฏู ุนูู Render/Vercel**

ุฃุถู Scheduled Task ูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน:
- **Cron Expression**: `0 9 * * *` (ูู ููู ุงูุณุงุนุฉ 9 ุตุจุงุญุงู)
- **Command**: `curl https://YOUR_SERVER_URL/api/check-expiry`

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑ ุงูุขู (ูุฏููุงู):

ููุชุฃูุฏ ุฃู ูู ุดูุก ูุนููุ ููููู ุงูุถุบุท ุนูู ุงูุฑุงุจุท ุงูุชุงูู ูู ุงููุชุตูุญ:

```
http://localhost:3000/api/check-expiry
```

**ุณุชุตูู ุฑุณุงูุฉ ูุซู:**
```
๐ ุชูุจูู ุงูุชูุงุก ุงูุตูุงุญูุฉ
โ๏ธ ุชูุจูู: ูุฏููู 5 ููุชุฌุงุช ุณุชูุชูู ุตูุงุญูุชูุง ุฎูุงู 7 ุฃูุงู! ุชููุฏ ุงููุฎุฒูู ุงูุขู.
```

---

## โ๏ธ ุชุฎุตูุต ุงูุฅุนุฏุงุฏุงุช:

### 1. ุชุบููุฑ ุนุฏุฏ ุงูุฃูุงู (ูู 7 ุฅูู ุฑูู ุขุฎุฑ):

ูู `server/index.js`ุ ุงุจุญุซ ุนู:
```javascript
sevenDaysFromNow.setDate(today.getDate() + 7);
```
ุบููุฑ ุงูุฑูู `7` ุฅูู ุฃู ุฑูู ุชุฑูุฏู (ูุซูุงู 3 ุฃู 10).

### 2. ุชุฎุตูุต ูุต ุงูุฑุณุงูุฉ:

ูู `server/index.js`ุ ุงุจุญุซ ุนู:
```javascript
const message = `โ๏ธ ุชูุจูู: ูุฏููู ${count} ููุชุฌุงุช ุณุชูุชูู ุตูุงุญูุชูุง ุฎูุงู 7 ุฃูุงู! ุชููุฏ ุงููุฎุฒูู ุงูุขู.`;
```
ุบููุฑ ุงููุต ููุง ุชุฑูุฏ!

---

## ๐ฏ ููุฎุต ุณุฑูุน:

| ุงูุฎุทูุฉ | ุงูุญุงูุฉ |
|--------|--------|
| โ API Endpoint ุฌุงูุฒ | **ุชู** |
| โ OneSignal ููุนูู | **ุชู** |
| โณ ุฅุถุงูุฉ REST API Key | **ุงูุชุธุงุฑ ููู** |
| โณ ุฌุฏููุฉ ุชููุงุฆูุฉ (Cron) | **ุงุฎุชูุงุฑู** |

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### **ุงููุดููุฉ: "No REST API Key found"**
**ุงูุญู:** ุชุฃูุฏ ุฃู `.env` ูุญุชูู ุนูู ุงูููุชุงุญ ูุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู.

### **ุงููุดููุฉ: "OneSignal Failed"**
**ุงูุญู:** ุชุญูู ูู ุตูุงุญูุฉ ุงูููุชุงุญุ ูุฃู ุงูุชุทุจูู ููุนูู ูู OneSignal.

### **ุงููุดููุฉ: "No expiring products found"**
**ุงูุญู:** ูุฐุง ุดูุก ุฌูุฏ! ูุนูู ูุง ููุฌุฏ ููุชุฌุงุช ูุฑูุจุฉ ูู ุงูุงูุชูุงุก.

---

## ๐ ุชุญุชุงุฌ ูุณุงุนุฏุฉุ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉุ ุฃุฎุจุฑูู ูุณุฃุณุงุนุฏู ููุฑุงู! ๐
